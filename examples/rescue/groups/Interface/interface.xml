<?xml version="1.0"?>

<domain-description  xmlns="http://rescue.org/ns/domain/0.2"
            xmlns:domain="http://rescue.org/ns/domain/0.2"
            xmlns:rng="http://relaxng.org/ns/structure/1.0">
  <properties>
<!-- {{{ -->
    <rng:element name="longitude">
      <caption lang="en">Longitude</caption>
      <caption lang="de">LÃ¤ngengrad</caption>
      <rng:data type="positiveInteger"/>
    </rng:element>
    <rng:element name="latitude">
      <caption lang="en">Latitude</caption>
      <caption lang="de">Breitengrad</caption>
      <rng:data type="positiveInteger"/>
    </rng:element>
    <rng:element name="carpark">
      <caption lang="en">Carpark</caption>
      <caption lang="de">Parkplatz</caption>
      <rng:data type="boolean"/>
    </rng:element>
<!-- }}} -->
  </properties>
  <operations>
    <operation name="op1" short="" xmlns="http://rescue.org/ns/controlflow/0.2">
<!-- {{{ --> 
      <context-variables>
      </context-variables>
      <endpoints/>
      <execute>
        <call id="perform_op1" endpoint="resource_path" service-operation="op1">
          <input name="pi1" message-parameter="op1">
            <domain:caption lang="en">pi1</domain:caption>
            <rng:data type="string"/>
          </input>
          <output name="po1" message-parameter="mpo1">
            <domain:caption lang="en">po2</domain:caption>
            <rng:data type="string"/>
          </output>
        </call>
      </execute>
      <compensate/>
      <undo/>
      <redo/>
      <suspend/>
      <abort/>
<!-- }}} -->   
    </operation>
    <operation name="loop" short="" xmlns="http://rescue.org/ns/controlflow/0.2">
<!-- {{{ --> 
      <context-variables>
        <loop_count>2</loop_count>
      </context-variables>
      <endpoints/>
      <execute>
        <loop>
          <condition test="loop_count" comparator="&gt;" value="0"/>
          <call id="loop_op1" endpoint="resource_path" service-operation="loop">
            <input name="pi1" message-parameter="op1">
              <domain:caption lang="en">pi1</domain:caption>
              <rng:data type="string"/>
            </input>
            <output name="po1" message-parameter="mpo1">
              <domain:caption lang="en">po2</domain:caption>
              <rng:data type="string"/>
            </output>
          </call>
          <manipulate id="reduce_counter">
            <variable context="loop_count" local="count"/>
            count -= 1
          </manipulate>
        </loop>
      </execute>
      <compensate/>
      <undo/>
      <redo/>
      <suspend/>
      <abort/>
<!-- }}} -->  
    </operation>
    <operation name="parallel" short="" xmlns="http://rescue.org/ns/controlflow/0.2">
<!-- {{{ --> 
      <context-variables>
        <loop_count>2</loop_count>
      </context-variables>
      <endpoints/>
      <execute>
        <parallel>
        <parallel_branch>
          <call id="prallel_op1" endpoint="resource_path" service-operation="op1">
            <input name="pi1" message-parameter="op1">
              <domain:caption lang="en">pi1</domain:caption>
              <rng:data type="string"/>
            </input>
            <output name="po1" message-parameter="mpo1">
              <domain:caption lang="en">po2</domain:caption>
              <rng:data type="string"/>
            </output>
          </call>
        </parallel_branch>
        <parallel_branch>
          <call id="prallel_op2" endpoint="resource_path" service-operation="op1">
            <input name="pi1" message-parameter="op1">
              <domain:caption lang="en">pi1</domain:caption>
              <rng:data type="string"/>
            </input>
            <output name="po1" message-parameter="mpo1">
              <domain:caption lang="en">po2</domain:caption>
              <rng:data type="string"/>
            </output>
          </call>
        </parallel_branch>
        </parallel>
      </execute>
      <compensate/>
      <undo/>
      <redo/>
      <suspend/>
      <abort/>
<!-- }}} -->  
    </operation>
    <operation name="op2" short="" xmlns="http://rescue.org/ns/controlflow/0.2">
<!-- {{{ -->  
      <context-variables>
        <class_input>3</class_input>
        <class_out/>
      </context-variables>
      <endpoints/>
      <execute>
        <call id="perform_op1" endpoint="resource_path" service-operation="op1">
          <input name="mpi1" message-parameter="op2">
            <domain:caption lang="en">op2</domain:caption>
            <rng:data type="string"/>
          </input>
          <output name="mpo2" variable="class_out">
            <domain:caption lang="en">class_op2</domain:caption>
            <rng:data type="string"/>
          </output>
        </call>
        <call id="op2" endpoint="resource_path"  service-operation="op2">
          <input name="pi2" variable="class_out">
            <domain:caption lang="en">op2</domain:caption>
            <rng:data type="string"/>
          </input>
        </call>
      </execute>
      <compensate/>
      <undo/>
      <redo/>
      <suspend/>
      <abort/>
<!-- }}} --> 
    </operation>
  </operations>
</domain-description>

