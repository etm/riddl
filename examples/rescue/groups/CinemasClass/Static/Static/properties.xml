<?xml version="1.0"?>

<service-description xmlns="http://rescue.org/ns/service/0.2"
                 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <properties>
    <adress>
      <zip>1010</zip>
      <city>Vienna</city>
    </adress>
  </properties>
  <operations xmlns="http://rescue.org/ns/controlflow/0.2">
    <search>
      <endpoints>
        <ep>http://www.pri.univie.ac.at/~ralph/Testservices/static.xml</ep>
      </endpoints>
      <context-variables>
        <out/>
      </context-variables>
      <execute>
        <call id="find" endpoint="ep" http-method="get">
          <output variable="out" name="" type="complex"/>
        </call>
        <manipulate id="filter">
          <variable context="out" local="result"/>
          <variable input-parameter="title" local="title"/>
          <variable output-parameter="list" local="output"/>
          list = XML::Smart.string(result)
          list.find("//show").delete_if! do |s|
            s.find(&quot;child::title&quot;).first.text != title
          end
          puts &quot;=&quot;*60
          output = list.root.dump
          puts output
          puts list.root.dump
          puts &quot;=&quot;*60
        </manipulate>
      </execute>
      <compensate/>
      <undo/>
      <redo/>
      <suspend/>
      <abort/>
    </search>
    <book>
      <endpoints>
        <ep>http://www.pri.univie.ac.at/~ralph/Testservices/Cinema.php</ep>
      </endpoints>
      <context-variables>
      </context-variables>
      <execute>
        <call id="book" endpoint="ep" http-method="post">
          <input name="showID" message-parameter="show_id"/>
          <output message-parameter="reservation_id" name="resID"/>
        </call>
      </execute>
      <compensate/>
      <undo/>
      <redo/>
      <suspend/>
      <abort/>
    </book>
  </operations>
</service-description>
