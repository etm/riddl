<workflow xmlns="http://rescue.org/ns/workflow/0.2">
  <context id="title">Alice in Wonderland</context>
  <context id="preferred-starting-time">20:00:00</context>
  <context id="cinema-date">2010-02-26</context>
  <context id="cinema-reservation-id"/>
  <context id="number-of-persons"/>
  <context id="cinema-time"/>
  <context id="departure">2010-02-27</context>
  <context id="reservation-lodging"/>
  <context id="car-park">yes</context>
  <context id="stars">3</context>
  <context id="longitutde">234</context>
  <context id="latitude">789</context>


  <task id="go-to-the-movies" resource-path="Cinemas/Arthouse" operation="book" selector-uri="http://localhost:9292">
    <properties>
      <constraint class="geo-location">
        <property name="longitude" context="longitude"/>
        <property name="latitude" context="latitude"/>
      </constraint>
    </properties>
    <input message-parameter="title" context="title"/>
    <input message-parameter="preferred-time" context="preferred-starting-time"/>
    <input message-parameter="date" context="cinema-date"/>
    <input message-parameter="number-of-persons" context="number-of-persons"/>
    <output message-parameter="reservation-id" context="reservation-id"/>
    <output message-parameter="starting-time" context="cinema-time"/> 
  </task>

  <task id="find-a-place-to-sleep" resource-path="Lodging/Fancy" operation="book" selector-uri="http://waehle-mein-hotel.at">
    <properties>
      <constraint class="exact-match">
        <property name="car-park" context="carpark"/>
        <property name="city" task-id="go-to-the-movies" service-property="city"/>
      </constraint>
      <constraint class="greater-than">
        <property name="stars" context="stars"/>
      </constraint>
    </properties>
    <input message-parameter="aravial" context="cinema-date"/>
    <input message-parameter="departure" context="departure"/>
    <output message-parameter="reservation-id" context="reservation-lodging"/>
  </task>
</workflow>
