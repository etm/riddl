<?xml version="1.0"?>

<interface  xmlns="http://rescue.org/ns/group/0.2"
            xmlns:rng="http://relaxng.org/ns/structure/1.0"
            xmlns:exec="http://rescue.org/ns/execute/0.2">
  <properties>
<!-- {{{ -->
    <rng:element name="longitude">
      <caption lang="en">Longitude</caption>
      <caption lang="de">LÃ¤ngengrad</caption>
      <rng:data type="positiveInteger"/>
    </rng:element>
    <rng:element name="latitude">
      <caption lang="en">Latitude</caption>
      <caption lang="de">Breitengrad</caption>
      <rng:data type="positiveInteger"/>
    </rng:element>
<!-- }}} -->
  </properties>
  <operations>
<!-- {{{ -->
    <operation name="search" short="search for movies">
      <messages>
        <message name="input">
          <rng:element name="title">
            <caption lang="en">Title</caption>
            <caption lang="de">Titel</caption>
            <rng:data type="string"/>
          </rng:element>
          <rng:element name="date">
            <caption lang="en">Date</caption>
            <caption lang="de">Datum</caption>
            <rng:data type="date"/>
          </rng:element>
          <rng:element name="preferred-time">
            <caption lang="en">preferred time</caption>
            <caption lang="de">bevorzugte Zeit</caption>
            <rng:data type="time"/>
          </rng:element>
        </message>
        <message name="output">
          <rng:zeroOrMore>
            <rng:element name="show">
              <rng:element name="movie-title">
                <caption lang="en">Movietitle</caption>
                <caption lang="de">Filmtitel</caption>
                <rng:data type="string"/>
              </rng:element>
              <rng:element name="show-id">
                <caption lang="en">ShowID</caption>
                <caption lang="de">VorstellungsID</caption>
                <rng:data type="string"/>
              </rng:element>
              <rng:element name="starting-time">
                <caption lang="en">Starting time</caption>
                <caption lang="de">Beginzeit</caption>
                <rng:data type="time"/>
              </rng:element>
              <rng:element name="hall">
                <caption lang="en">Hall</caption>
                <caption lang="de">Saal</caption>
                <rng:data type="positiveInteger"/>
              </rng:element>
            </rng:element>
          </rng:zeroOrMore>
        </message>
      </messages>
      <endpoints>
        <exec:endpoint id="search"/>
        <exec:endpoint id="invoke"/>
      </endpoints>
      <context-variables>
        <exec:context id="scoping-test"/>
      </context-variables>
      <execute>
        <exec:call name="find" endpoint="search">
          <input message="input"/>
          <output message="output"/>
        </exec:call>
      </execute>
      <compensate/>
      <undo/>
      <redo/>
      <suspend/>
      <abort/>
    </operation>
    <operation name="book" short="select show and book tickets">
      <execution>
       
        <execute name="search-show" method="query" request="multiple">
          <selection name="show"/>
        </execute>
        <execute name="book-tickets" method="invoke" request="particular" selector="show"/>
      </execution>
      <compensation/>
    </operation>
<!-- }}} -->
  </operations>
  <methods>
    <method name="query">
<!-- {{{ -->
    </method>
<!-- }}} -->
    <method name="invoke">
<!-- {{{ -->
      <input-message>
        <rng:element name="show-id">
          <caption lang="en">ShowID</caption>
          <caption lang="de">VorstellungsID</caption>
          <rng:data type="string"/>
        </rng:element>
        <rng:element name="number-of-seats">
          <caption lang="en">Number of seats</caption>
          <caption lang="de">Anzahl Plaetze</caption>
          <rng:data type="positiveInteger"/>
        </rng:element>
        <rng:element name="username">
          <caption lang="en">Username</caption>
          <caption lang="de">Benutzername</caption>
          <rng:data type="string"/>
        </rng:element>
        <rng:element name="password">
          <caption lang="en">Password</caption>
          <caption lang="de">Passwort</caption>
          <rng:data type="string"/>
        </rng:element>
      </input-message>
      <output-message>
        <rng:element name="reservation-id">
          <caption lang="en">Reservation ID</caption>
          <caption lang="de">Reservierungsnummer</caption>
          <rng:data type="string"/>
        </rng:element>
      </output-message>
    </method>
<!-- }}} -->
    <method name="undo">
<!-- {{{ -->
      <input-message>
        <rng:element name="username">
          <caption lang="en">Username</caption>
          <caption lang="de">Benutzername</caption>
          <rng:data type="string"/>
        </rng:element>
        <rng:element name="password">
          <caption lang="en">Password</caption>
          <caption lang="de">Passwort</caption>
          <rng:data type="string"/>
        </rng:element>
        <rng:element name="reservation-id">
          <caption lang="en">ReservationID</caption>
          <caption lang="de">Reservierungsnummer</caption>
          <rng:data type="string"/>
        </rng:element>
      </input-message>
      <output-message>
        <rng:element name="cancelation-costs">
          <caption lang="en">Stornokosten</caption>
          <caption lang="de">Cancelation costs</caption>
          <rng:data type="float"/>
        </rng:element>
      </output-message>
    </method>
 <!-- }}} -->
  </methods>
</interface>

