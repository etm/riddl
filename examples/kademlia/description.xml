<?xml version="1.0" encoding="UTF-8"?>
<d:description 
	datatypeLibrary="http://tempuri.org" 
	xmlns:d="http://riddl.org/ns/description/1.0" 
	xmlns:datatypes="http://riddl.org/ns/datatypes/1.0" 
	xmlns:de="http://riddl.org/ns/declaration/1.0" 
	xmlns:structure="http://relaxng.org/ns/structure/1.0" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://riddl.org/ns/description/1.0 ../../ns/description-1_0.xsd "
	xmlns:xi="http://www.w3.org/2001/XInclude"
	>
  <d:message name="ping"/>
  
  <d:message name="find-value">
  	<d:parameter name="queryType" type="string" fixedValue="value"/>
  </d:message>
  <d:message name="find-value-response">
  	<d:parameter name="key" type="string" handler="http://riddl.org/ns/part-plugins/plain"/>
	<d:part name="nodeList" type="text/xml" handler="http://riddl.org/ns/part-plugins/xsd" occurs="?">
	  <xi:include href="node-list.xsd"/>
	</d:part>
  </d:message>
  
  <d:message name="find-node">
  	<d:parameter name="queryType" type="string" fixedValue="node"/>
  </d:message>
  <d:message name="find-node-response">
	<d:part name="nodeList" type="text/xml" handler="http://riddl.org/ns/part-plugins/xsd">
	  <xi:include href="node-list.xsd"/>
	</d:part>
  </d:message>
  
  <d:message name="store-value">
  	<d:parameter name="value" type="string" handler="http://riddl.org/ns/part-plugins/plain"/>
  </d:message>
  
  <d:message name="key">
  	<d:parameter name="key" type="string" handler="http://riddl.org/ns/part-plugins/plain"/>
  </d:message>
  
  <d:message name="integer">
  	<d:parameter name="integer" type="integer" handler="http://riddl.org/ns/part-plugins/plain"/>
  </d:message>
  
  <d:resource>
	  <d:resource relative="network">
	  	<d:resource>
		  <d:get in="find-value" out="find-value-response"/>
		  <d:get in="find-node" out="find-node-response"/>
		  <d:get in="ping"/>
		  <d:put in="store-value"/>
	 	</d:resource>
	 	<d:resource relative="properties">
	 		<d:resource relative="k">
	 			<d:get in="*" out="integer"/>
	 		</d:resource>
	 	</d:resource>
	  </d:resource>
	  
	  <d:resource relative="node">
	  	<d:resource relative="id">
		  <d:get in="*" out="key"/>
	 	</d:resource>
	  </d:resource>
  </d:resource>
  
</d:description>
