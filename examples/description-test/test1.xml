<description datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes" xmlns="http://riddl.org/ns/description/1.0" xmlns:xi="http://www.w3.org/2001/XInclude">

  <message name="book-query">
    <header name="Library" type="integer"/>
    <zeroOrMore>
      <choice>
        <group>
          <parameter name="author" type="string"/>
        </group>  
        <optional>
          <parameter name="title" type="string"/>
        </optional>  
      </choice>
    </zeroOrMore>
  </message>

  <add name="add-to-book-query">
    <after_each name="*">
      <parameter name="title" type="string"/>
    </after_each>
    <before_each name="*">
      <parameter name="title" type="string"/>
    </before_each>  
    <before_first name="*">
      <parameter name="title" type="string"/>
    </before_first>  
    <after_last name="*">
      <parameter name="title" type="string"/>
    </after_last>  
    <as_first>
      <parameter name="title" type="string"/>
    </as_first>
    <as_last>
      <parameter name="title" type="string"/>
    </as_last>
  </add>

  <remove name="remove-from-book-quer">
    <each name="*"/>
    <first name="*"/>
    <last name="*"/>
  </remove>

  <message name="list-of-books">
    <parameter name="list-of-books" mimetype="text/xml" handler="http://riddl.org/ns/handlers/relaxng">
      <xi:include href="rngs/list-of-books.rng"/>
    </parameter>
  </message>

  <resource>
    <request type="test" in="book-query" out="list-of-books"/>
    <request type="albert" add="add-to-book-query" remove="remove-from-book-query"/>
  </resource>  

</description>
